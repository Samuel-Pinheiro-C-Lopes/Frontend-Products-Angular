<div class="container">
    <form>
        <div class="form-group">
            <label for="name" class="form-label">Name</label>
            <input 
                #name="ngModel"
                type="text" 
                [(ngModel)]="product.name" 
                name="name" 
                id="name" 
                class="form-control"
                required
            >
        </div>

        <div class="form-group">
            <label for="amount" class="form-label">Amount</label>
            <input 
                type="number" 
                #amount="ngModel" 
                [(ngModel)]="product.amount" 
                name="amount" 
                id="amount"
                class="form-control"
                required
            >
        </div>

        <div class="form-group"> 
            <label for="price" class="form-label">Price</label>
            <input 
                type="number" 
                name="price" 
                id="price"
                #price="ngModel"
                [(ngModel)]="product.price"
                class="form-control"
                required
            >
        </div>

        <button 
            class="mt-3 btn btn-success" 
            (click)="save(product)"
            [disabled]="name.invalid || amount.invalid || price.invalid"
        >
            Add
        </button>

        @if(showBtn) {
            <button
                class="btn btn-primary"
                [disabled]="name.invalid || amount.invalid || price.invalid"
                (click)="update(product)"
            >
                Update
            </button>
        }
    </form>
</div>

<hr />

<div class="container">
    <table class="w-70 mx-auto table">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Amount</th>
            <th scope="col">Price</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
        @for (p of products; track p.id) {
            <tr>
                <td>{{p.name}}</td>
                <td>{{p.amount}}</td>
                <td>{{p.price | currency: 'BRL': 'symbol' : '1.2-2'}}</td>
                <td><button (click)="updateActual(p)" class="btn btn-warning">Update</button></td>
                <td><button (click)="delete(p.id)" class="btn btn-danger">Delete</button></td>
            </tr>
        }
        </tbody>
    </table>
</div>